---
layout: single
title: "게시글 읽기"
categories: SpringBoot
classes: wide
---

# 게시글 읽기: Read

## 1. 데이터 조회 과정

![image](https://github.com/Y0-0N63/STUDY-4242/assets/144354615/b4442b0b-7104-4f74-b98e-b137a1e936a9){: width="60%"}

1. 사용자가 웹페이지에서 데이터를 조회하기 위해 특정 URL 요청
2. 컨트롤러가 요청을 받아 해당 URL에서 찾으려는 데이터 정보(id 등)를 리포지터리에 전달
3. 리포지터리는 정보(id 등)를 가지고 DB에 데이터 조회를 요청
4. DB는 해당 데이터를 찾아 엔티티 형태로 리포지터리에 반환
5. 컨트롤러에 반환된 엔티티를 전달한 후 해당 데이터를 모델에 추가하여 모델을 통해 뷰 템플릿으로 전달
6. 뷰 템플릿은 모델로부터 받은 데이터를 사용하여 완성한 최종 결과 뷰 페이지를 사용자 화면에 출력

## 2. 단일 데이터 조회하기

1. 사용자가 입력하여 DB에 저장한 데이터를 조회하기 위해 URL을 요청할 때, 게시글의 id를 사용하고자 한다. (`articles/id`)

2. 그러기 위해서 컨트롤러는 `@GetMapping("/articles/{id})`로 URL 요청을 받는다. 그리고 이 URL에 포함된 id를 `show()`메서드의 매개변수로 받는다. 이때 매개변수 앞에 `@PathVariable` 어노테이션을 붙여야 한다. 그래야 URL의 id를 가져올 수 있기 때문이다.
```
@GetMapping("/articles/{id}")
  public String show(@PathVariable Long id, Model model){
}
```

>`@PathVariable`**이란?** : 경로 변수를 표시하기 위해 메서드의 매개변수에 사용된다. <br>
> 경로 변수는 { }로 둘러싸인 값을 나타내며 URL 경로에서 변수 값을 추출하여 매개변수에 할당한다. <br>
> 기본적으로 경로 변수는 반드시 값을 가져야 하며, 값이 없는 경우 404 오류가 발생한다. <br>
> 주로 상세 조회, 수정, 삭제와 같은 작업 등에서 사용되며 리소스 경로에 식별자를 넣어 동적으로 URL에 정보를 담을 수 있도록 한다.

3. 리포지터리에서 DB에 저장된 데이터를 id로 조회할 때 `findById()` 메서드를 사용한다. 특별히 조회된 데이터가 없는 경우도 처리해야 하므로 `orElse()` 메서드로 null이 반환되도록 한다.
`Article articleEntity = articleRepository.findById(id).orElse(null);`

4. id로 DB에서 조회한 데이터는 모델에 article이라는 이름으로 등록한다.
`model.addAttribute("article",  articleEntity);`

5. 최종적으로 모델에 등록한 데이터를 뷰 페이지에서 사용할 수 있게 설정한다.

![image](https://github.com/Y0-0N63/STUDY-4242/assets/144354615/b9e57dcf-b73f-4435-8651-25d3f54c43e4){: width="60%"}

## 3. 데이터 목록 조회하기

단일 데이터를 조회할 때 리포지터리는 엔티티를 반환했지만, 데이터 목록을 조회할 때는 엔티티의 묶음인 **리스트**	를 반환한다.

3. 리포지터리에서 DB에 저장된 데이터를 id로 조회할 때 `findById()` 메서드를 사용한다. 특별히 조회된 데이터가 없는 경우도 처리해야 하므로 `orElse()` 메서드로 null이 반환되도록 한다.

4. 위와 달리 데이터의 묶음을 받아올 수 있도록 `List<Article>`로 설정해야 한다. 그러나 `findAll()`이 반환하는 데이터 타입은 Iterable이기 때문에 타입에 대한 변환이 필요하다. 이때 `findAll()`이 Iterable이 아니라 ArrayList를 반환하도록 수정하였다.

![image](https://github.com/Y0-0N63/Spring-Boot/assets/144354615/77822d5b-0747-470a-b0e7-f4ecdededb2a){: width="30%"}

추가로, 타입을 일치시는 방법은 다음과 같다.

>**반환 데이터 타입 불일치 문제 해결법** <br>
> - 메서드가 반환하는 데이터 타입을 사용자가 작성한 데이터 타입으로 캐스팅하기
> - 사용자가 작성한 데이터 타입을 메서드가 반환하는 데이터 타입으로 수정하기
> - 메서드의 반환 데이터 타입을 원하는 타입으로 오버라이딩하기

>**캐스팅 (Casting)** : 데이터 타입을 변환하는 것으로 형변환이라고도 함 <br>
> 보다 넓은 범위로 해석하는 것을 **업캐스팅** (Upcasting), 보다 좁은 범위로 해석하는 것을 **다운캐스팅** (Downcasting)이라고 한다.

`ArrayList<Article> findAll();`

2. 가져온 Article 묶음을 모델에 등록하기
3. 사용자에게 보여 줄 뷰 페이지 설정하기
